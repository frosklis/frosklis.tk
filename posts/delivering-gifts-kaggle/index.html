<!doctype html><html><head><title>Delivering gifts (Kaggle)</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-267152-14','auto');ga('send','pageview');}</script><script src=/vendor/js/jquery.min.js></script><script src=/vendor/js/popper.min.js></script><script src=/vendor/js/bootstrap.min.js></script><script src=/vendor/js/smooth-scroll.polyfills.min.js></script><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><script src=/vendor/js/vue.min.js></script><link rel=icon href=/favicon.png><link rel=stylesheet href=https://frosklis.tk/scss/journal.min.5c667e74038e21ddbb9024b67930f8544e02af62491281cf73fdb817eec2947e.css integrity="sha256-XGZ+dAOOId27kCS2eTD4VE4Cr2JJEoHPc/24F+7ClH4=" media=screen><script src=https://frosklis.tk//js/loadCSS.js></script><script src=https://frosklis.tk//js/table.js></script><script src=https://frosklis.tk//js/toc.js></script><script>loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");</script></head><body><div id=app><div ref=sideContainer class=side-container><a class="a-block nav-head false" href=https://frosklis.tk/><div class=nav-title>Claudio Noguera</div></a><div class=nav-link-list></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://amazingrise.net>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2020 Claudio Noguera</div></div><div ref=extraContainer class=extra-container><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a></div></div><div class=single-column-drawer-container ref=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><div class=toc></div></div></div></div><transition name=fade><div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav ref=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div ref=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a ref=navTitle class=navbar-brand href=https://frosklis.tk/>Claudio Noguera</a></div></nav><div class=single-column-header-container ref=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://frosklis.tk/><div class=single-column-header-title>Claudio Noguera</div></a></div><div id=content><div ref=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only style="background-image:url('/')"><div class=post-title>Delivering gifts (Kaggle)<div class=post-meta><time itemprop=datePublished>2016-01-08 00:00</time>
<i class=material-icons>folder</i>
<a href=/categories/>[Data science]</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/kaggle>Kaggle</a>
&nbsp;
<a href=/tags/data-science>data science</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body><p>There are a lot of things we take for granted. One of these things is logistics. We assume that when we have one order delivered it will arrive on time, but we often overlook how difficult it actually is. Well, there was a <a href=https://www.kaggle.com/c/santas-stolen-sleigh title="Santa's stolen sleigh">Kaggle competition just about that</a>. And they just made it harder.</p><p>The [travelling salesman problem] is perhaps the best known NP problem. Given a set of cities, the goal is to find the shortest route that goes through all the cities. The only way to assure a solution is optimal, in general, is actually trying all the possible solutions. But <a href=https://www.kaggle.com title=Kaggle>Kaggle</a> made it even harder. In the Kaggle problem Santa Claus has a lot of gifts (100,000) to give. Each give has a weight and a location to be sent to. The deers get tired because of the distance and the weight they carry. The sleight itself also has a weight and a load limit.</p><p>The idea is first to load the sleigh, then deliver the gifts, go back to the North Pole and repeat until all gifts are delivered. The second part is in itself an NP-hard problem, even harder than the TSP:</p><ul><li>The cost of going from A to B is not static</li></ul><p>It depends on the distance from A to B and the weight of the sleigh plus the gifts&mldr; and the weight of the sleigh depends on the order of the previously visited cities.</p><p>Oh, and the first part - loading the sleigh - somehow resembles another NP-hard problem: <a href=https://en.wikipedia.org/wiki/Knapsack_problem title="Knapsack problem">the knapsack problem</a></p><p>The best approach I could think of involves reconstructing the trip backwards:</p><ol><li>Start from the North Pole, with an empty sleigh.</li><li>Choose the next city to visit and load the sleigh. If the sleigh is too loaded, it has to go back to the North Pole.</li><li>Repeat until all cities have been visited.</li></ol><p>If that gives a solution that is O-A-B-O-C-D-O, the actual solution is that reversed (O-D-C-O-B-A-O): two trips, one with gifts AB and another with CD. I did it this way because doing that I can avoid taking the decision of what cities to visit in each trip in advance.</p><p>There is, however, one big caveat: there are 100,000 gifts. This means that operationally I cannot address the full problema at once. SO what I did was start with a logical solution: grouping gifts that are close. Once I have that I optimize de rout using ant colony optimization. And then more or less randomly satrt merging trips to see if I can find a better solution.</p><p>Currently, that method gets me a bad position in the contest but with 2% of the winner&rsquo;s solution. Still two days to go.</p><hr width=100% id=EOF><p style=color:#777>Last modified on 2016-01-08</p></div></div><nav class=post-pagination><a class=newer-posts href=https://frosklis.tk/posts/i-got-myself-a-raspberry-pi/>Next<br>I got myself a Raspberry Pi</a>
<a class=older-posts href=https://frosklis.tk/posts/inbox-zero/>Previous<br>Inbox zero</a></nav><div class=post-comment-wrapper></div></div></div></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://amazingrise.net>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2020 Claudio Noguera</div></div><script src=https://frosklis.tk//js/journal.js></script></body></html>